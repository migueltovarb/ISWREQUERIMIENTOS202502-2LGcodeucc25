<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Cafetería del Campus – Autoservicio</title>

    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Estilos personalizados del proyecto -->
    <style>
        :root {
            --color-bg: #F7F3E8;
            --color-primary: #4A2F24;
            --color-primary-rgb: 74,47,36;
            --color-accent: #D2A679;
            --color-accent-alt: #C48B4D;
            --color-border: #E2D6C4;
            --gradient-bg: linear-gradient(145deg, #FAF6EE 0%, #F1E2C4 45%, #E3C089 100%);
        }
        body {
            background: var(--gradient-bg);
            font-family: 'Segoe UI', system-ui, sans-serif;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        .top-bar {
            background: var(--color-primary);
            color: #fff;
            padding: 10px 16px;
            text-align: center;
            font-size: 20px;
            font-weight: 600;
            letter-spacing: .5px;
        }
        .navbar-custom {
            background-color: var(--color-accent);
            box-shadow: 0 2px 6px rgba(var(--color-primary-rgb), .25);
        }
        .navbar-brand {
            font-weight: 700;
            color: var(--color-primary);
            display: flex;
            align-items: center;
            gap: .5rem;
        }
        .navbar-brand:hover { color: var(--color-primary); }
        .navbar-custom .nav-link {
            color: var(--color-primary) !important;
            font-weight: 600;
            margin-right: 6px;
            border-radius: 6px;
            padding: .45rem .85rem;
            transition: background-color .25s, color .25s, transform .25s;
        }
        .navbar-custom .nav-link:hover { background-color: var(--color-accent-alt); color: #fff !important; }
        .navbar-custom .nav-link.active { background-color: var(--color-primary); color: #fff !important; }
        .card-custom {
            border-radius: 18px;
            padding: 22px 24px;
            background: #ffffffee;
            backdrop-filter: blur(4px);
            border: 1px solid var(--color-border);
            box-shadow: 0 6px 18px rgba(0,0,0,.08);
            transition: transform .25s ease, box-shadow .25s ease;
        }
        .card-custom:hover { transform: translateY(-3px); box-shadow: 0 10px 24px rgba(0,0,0,.12); }
        .btn-primary { background-color: var(--color-primary); border-color: var(--color-primary); }
        .btn-primary:hover { background-color: var(--color-accent-alt); border-color: var(--color-accent-alt); }
        .btn-outline-primary { color: var(--color-primary); border-color: var(--color-primary); }
        .btn-outline-primary:hover { background: var(--color-primary); color: #fff; }
        footer {
            background: var(--color-accent);
            padding: 14px 10px;
            text-align: center;
            font-weight: 600;
            color: var(--color-primary);
            margin-top: auto;
            font-size: .9rem;
        }
        .toast { box-shadow: 0 4px 14px rgba(0,0,0,.18); }
        .toast-body { font-weight: 500; }
        .dark-mode {
            --color-bg: #2A2420;
            --color-primary: #F5E2C7;
            --color-accent: #6A4B3B;
            --color-accent-alt: #523628;
            --color-border: #3A302A;
            background: #1F1A17;
            color: var(--color-primary);
        }
        .dark-mode .card-custom { background: #2E2723; color: var(--color-primary); }
        .dark-mode .navbar-custom { box-shadow: 0 2px 6px rgba(0,0,0,.5); }
        .dark-mode .navbar-custom .nav-link.active { background: var(--color-accent-alt); }
    </style>
</head>

<body>

    <!-- Encabezado -->
    <div class="top-bar">
        CAFETERÍA DEL CAMPUS – AUTOSERVICIO
    </div>

    <!-- NAVBAR -->
    <nav class="navbar navbar-expand-lg navbar-custom" aria-label="Menú principal">
        <div class="container-fluid">
            <a class="navbar-brand" href="{% url 'index' %}"><i class="bi bi-cup-hot-fill"></i> Cafetería</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav"
                aria-controls="nav" aria-expanded="false" aria-label="Alternar navegación">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="nav">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item"><a class="nav-link {% if request.resolver_match.url_name == 'index' %}active{% endif %}" href="{% url 'index' %}">Inicio</a></li>
                    <li class="nav-item"><a class="nav-link {% if request.resolver_match.url_name == 'menu' %}active{% endif %}" href="{% url 'menu' %}">Menú</a></li>
                    <li class="nav-item"><a class="nav-link {% if request.resolver_match.url_name == 'crear_pedido_autoservicio' %}active{% endif %}" href="{% url 'crear_pedido_autoservicio' %}">Crear Pedido</a></li>
                    <li class="nav-item"><a class="nav-link {% if request.resolver_match.url_name == 'estado_pedidos' %}active{% endif %}" href="{% url 'estado_pedidos' %}">Mis Pedidos</a></li>
                    <li class="nav-item"><a class="nav-link" href="{% url 'logout' %}">Cerrar Sesión</a></li>
                </ul>
                <div class="d-flex gap-2">
                    <button id="toggleDark" type="button" class="btn btn-sm btn-outline-primary" aria-label="Alternar modo oscuro"><i class="bi bi-moon-stars"></i></button>
                </div>
            </div>
        </div>
    </nav>

    <!-- TOASTS DE ÉXITO -->
    {% if messages %}
    <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 1080;" aria-live="polite" aria-atomic="true">
        {% for message in messages %}
        <div class="toast show border-0 mb-2{% if 'error' in message.tags %} text-bg-danger{% elif 'warning' in message.tags %} text-bg-warning{% elif 'success' in message.tags %} text-bg-success{% else %} text-bg-primary{% endif %}">
            <div class="d-flex">
                <div class="toast-body">{{ message }}</div>
                <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Cerrar"></button>
            </div>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <!-- CONTENIDO PRINCIPAL -->
    <div class="container mt-4">
        {% block content %}
        {% endblock %}
    </div>

    <!-- FOOTER -->
    <footer>
        Sistema de Gestión de Pedidos – Proyecto Ingeniería de Requisitos 2025
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        (function() {
            const btn = document.getElementById('toggleDark');
            if(!btn) return;
            btn.addEventListener('click', () => {
                document.body.classList.toggle('dark-mode');
            });
        })();
    </script>

</body>

</html>
